{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/동시성-패턴-Fail-fast와-Single-Flight-패턴-비교/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/b2c-and-b2b-for-engineer/"},"timeToRead":1,"frontmatter":{"title":"B2C와 B2B 환경에서의 엔지니어링: 각자의 매력과 차이점","series":null}},{"fields":{"slug":"/하고-싶은-것의-부재/"},"timeToRead":1,"frontmatter":{"title":"하고 싶은 것의 부재","series":null}},{"fields":{"slug":"/고민하는-시간의-가치/"},"timeToRead":2,"frontmatter":{"title":"고민하는 시간의 가치","series":null}},{"fields":{"slug":"/프론트엔드-개발-없이-만드는-보상-시스템-아키텍처-Benefit-Referral-Reward/"},"timeToRead":1,"frontmatter":{"title":"프론트엔드 개발 없이 만드는 보상 시스템 아키텍처 (Benefit/Referral/Reward)","series":null}},{"fields":{"slug":"/작은-규모-공정한-평가/"},"timeToRead":1,"frontmatter":{"title":"작은 규모=공정한 평가","series":null}},{"fields":{"slug":"/기브앤테이크-6장-이기적인-이타주의자/"},"timeToRead":2,"frontmatter":{"title":"기브앤테이크 6장. 이기적인 이타주의자","series":null}},{"fields":{"slug":"/코틀린의-null-값에-대한-고찰/"},"timeToRead":4,"frontmatter":{"title":"코틀린의 null 값에 대한 고찰","series":"레딧에서는 무슨 이야기를 나눌까?"}},{"fields":{"slug":"/동시성-패턴-Fail-fast와-Single-Flight-패턴-비교/"},"timeToRead":4,"frontmatter":{"title":"동시성 패턴: Fail-fast와 Single Flight 패턴 비교","series":"레딧에서는 무슨 이야기를 나눌까?"}},{"fields":{"slug":"/인터넷에서-상대방을-추적하는-혁신적인-방법/"},"timeToRead":2,"frontmatter":{"title":"인터넷에서 상대방을 추적하는 혁신적인 방법","series":null}},{"fields":{"slug":"/개발-조직에서의-리더/"},"timeToRead":9,"frontmatter":{"title":"개발 조직에서의 리더 (부제: 다양한 문제해결 스타일)","series":null}},{"fields":{"slug":"/재미있게-의미있게/"},"timeToRead":1,"frontmatter":{"title":"재미있게, 의미있게","series":null}},{"fields":{"slug":"/평범한-결혼생활-임경선/"},"timeToRead":1,"frontmatter":{"title":"평범한 결혼생활 - 임경선 / 별점 3.0","series":null}},{"fields":{"slug":"/티몬-위메프-사태로-알아보는-흑자도산/"},"timeToRead":4,"frontmatter":{"title":"티몬·위메프 사태로 알아보는 흑자도산","series":null}},{"fields":{"slug":"/조직이-커지면서-발생하는-문제/"},"timeToRead":1,"frontmatter":{"title":"조직이 커지면서 발생하는 문제","series":null}},{"fields":{"slug":"/PM은-무얼-하는-사람/"},"timeToRead":2,"frontmatter":{"title":"PM은 무얼 하는 사람?","series":null}},{"fields":{"slug":"/당신은-얼마나-책임-지고-있나요-feat-Mandate-Levels/"},"timeToRead":4,"frontmatter":{"title":"당신은 얼마나 책임 지고 있나요? (feat. Mandate Levels)","series":null}},{"fields":{"slug":"/우리가-하는-일은-두-가지-유형의-일-뿐이다-부제-직무의-통합/"},"timeToRead":4,"frontmatter":{"title":"우리가 하는 일은 두 가지 유형의 일 뿐이다. (부제; 직무의 통합)","series":null}},{"fields":{"slug":"/교육-산업에-대한-고찰/"},"timeToRead":3,"frontmatter":{"title":"교육 산업에 대한 고찰","series":null}},{"fields":{"slug":"/useCallback을-순수-자바스크립트로-구현한다면/"},"timeToRead":4,"frontmatter":{"title":"useCallback을 순수 자바스크립트로 구현한다면?","series":null}},{"fields":{"slug":"/더-많은-기회를-발견하는-방법-The-Red-car-theory/"},"timeToRead":1,"frontmatter":{"title":"더 많은 기회를 발견하는 방법, The Red car theory","series":null}},{"fields":{"slug":"/주간회고-2024년-9주차/"},"timeToRead":2,"frontmatter":{"title":"[주간회고] 2024년 9주차","series":null}},{"fields":{"slug":"/번아웃을-한-번에-해결할-수-있는-방법은-성과다/"},"timeToRead":2,"frontmatter":{"title":"번아웃을 한 번에 해결할 수 있는 방법은 성과다","series":null}},{"fields":{"slug":"/주간회고-2024년-8주차/"},"timeToRead":2,"frontmatter":{"title":"[주간회고] 2024년 8주차","series":null}},{"fields":{"slug":"/유료화-그-이후-After-Willingness-to-pay/"},"timeToRead":2,"frontmatter":{"title":"유료화, 그 이후 (After Willingness to pay)","series":null}},{"fields":{"slug":"/주간회고-2024년-7주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 7주차","series":null}},{"fields":{"slug":"/주간회고-2024년-6주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 6주차","series":null}},{"fields":{"slug":"/볼타-이야기-채용-원칙/"},"timeToRead":4,"frontmatter":{"title":"[볼타 이야기] 채용 원칙","series":"볼타 이야기"}},{"fields":{"slug":"/주간회고-2024년-5주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 5주차","series":null}},{"fields":{"slug":"/볼타-이야기-작은-팀을-유지하려는-이유/"},"timeToRead":2,"frontmatter":{"title":"[볼타 이야기] 작은 팀을 유지하려는 이유","series":"볼타 이야기"}},{"fields":{"slug":"/볼타-이야기-결국-B2B는-잘-팔면-되는-거-아닌가/"},"timeToRead":2,"frontmatter":{"title":"[볼타 이야기] 결국 B2B는 잘 팔면 되는 거 아닌가?","series":"볼타 이야기"}},{"fields":{"slug":"/2023년-회고-프로젝트-퇴사-창업-채용-기술/"},"timeToRead":15,"frontmatter":{"title":"2023년 회고: 프로젝트, 퇴사, 창업, 채용, 기술","series":"볼타 이야기"}},{"fields":{"slug":"/실리콘밸리는-이렇게-일합니다-진짜-일과-가짜-일/"},"timeToRead":1,"frontmatter":{"title":"실리콘밸리는 이렇게 일합니다: 진짜 일과 가짜 일","series":null}},{"fields":{"slug":"/JPA-Entity-연관관계와-Domain-Entity에-대한-생각/"},"timeToRead":1,"frontmatter":{"title":"JPA Entity 연관관계와 Domain Entity에 대한 생각","series":"JPA"}},{"fields":{"slug":"/다른-사람에게-도움을-구하는-가장-좋은-방법/"},"timeToRead":5,"frontmatter":{"title":"다른 사람에게 도움을 구하는 가장 좋은 방법","series":null}},{"fields":{"slug":"/Facebook을-다운-시킨-원인-BGP-hijacking은-무엇인가/"},"timeToRead":3,"frontmatter":{"title":"Facebook을 다운 시킨 원인, BGP hijacking은 무엇인가?","series":null}},{"fields":{"slug":"/모든-회사에-어필-할-수-있는-지원-동기와-목표설정-방법/"},"timeToRead":2,"frontmatter":{"title":"모든 회사에 어필 할 수 있는 지원 동기와 목표설정 방법","series":null}},{"fields":{"slug":"/블로그-이관-및-앞으로의-계획/"},"timeToRead":2,"frontmatter":{"title":"블로그 이관 및 앞으로의 계획","series":"Vallista-land"}},{"fields":{"slug":"/빌드가-완료되면-소리-나게-해주세요/"},"timeToRead":1,"frontmatter":{"title":"???: 빌드가 완료되면 소리 나게 해주세요.","series":null}},{"fields":{"slug":"/한기용님과-함께하는-단체챗-회고/"},"timeToRead":1,"frontmatter":{"title":"한기용님과 함께하는 단체챗 회고","series":"장인 정신"}},{"fields":{"slug":"/Java-Compiler-Optimization/"},"timeToRead":3,"frontmatter":{"title":"Java Compiler Optimization","series":null}},{"fields":{"slug":"/내가-개발-커뮤니티를-하는-이유/"},"timeToRead":15,"frontmatter":{"title":"내가 개발 커뮤니티를 하는 이유 (a.k.a. 10년 회고)","series":null}},{"fields":{"slug":"/Google-Calendar-API-분석-및-시스템-구축-전략/"},"timeToRead":4,"frontmatter":{"title":"Google Calendar API 분석 및 시스템 구축 전략","series":null}},{"fields":{"slug":"/Webhooks(웹훅)-시스템-체크리스트/"},"timeToRead":2,"frontmatter":{"title":"Webhooks(웹훅) 시스템 체크리스트","series":null}},{"fields":{"slug":"/Why-DDD-Clean-Architecture-and-Hexagonal/"},"timeToRead":8,"frontmatter":{"title":"Why DDD, Clean Architecture and Hexagonal?","series":null}}],"group":[{"fieldValue":"JPA","totalCount":1},{"fieldValue":"Vallista-land","totalCount":1},{"fieldValue":"레딧에서는 무슨 이야기를 나눌까?","totalCount":2},{"fieldValue":"볼타 이야기","totalCount":4},{"fieldValue":"장인 정신","totalCount":1}]},"markdownRemark":{"id":"59cc24e6-e198-59eb-baed-6c70b6cd8912","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.359375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHqp5LEg//EABoQAAICAwAAAAAAAAAAAAAAAAABERICAyH/2gAIAQEAAQUCydWtqZJY4nJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAAEQESExYZH/2gAIAQEABj8Crim2smDB/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERITFRgf/aAAgBAQABPyFukM5proezSg4qXISP/9oADAMBAAIAAwAAABAAz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEBAAMBAQAAAAAAAAAAAAERACExcUFh/9oACAEBAAE/EDgNXmsfHeAYLgoMF+Jis6JH9wEEHWBxpdB9d//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hero\"\n        title=\"hero\"\n        src=\"/static/65191d3fa2671140f0b73ef9aab539eb/72e01/1.jpg\"\n        srcset=\"/static/65191d3fa2671140f0b73ef9aab539eb/e4a55/1.jpg 256w,\n/static/65191d3fa2671140f0b73ef9aab539eb/36dd4/1.jpg 512w,\n/static/65191d3fa2671140f0b73ef9aab539eb/72e01/1.jpg 1024w,\n/static/65191d3fa2671140f0b73ef9aab539eb/9657e/1.jpg 1216w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<iframe src=\"https://embed.reddit.com/r/Kotlin/comments/1icz7k8/whats_the_name_of_this_concurrency_concept\"    scrolling=\"no\" width=\"100%\" height=\"316\"></iframe>\n<h2>원문 상황</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVQ4y6VTa2/bMAzU//9zw7rOzaNp4jSJH5IlW37JaZwbjorXAhuwDzNAkJQlirw7qdBPKIyB8x7dMOJ/vnmeoZ6ef+JHkmC12SJZr/H69oZDmmK93eKQHiXf7nZIj0fs9nus1hvs0xTJywqrzQb7w0HWt687WOegnpME374/oaoq9H0P37YYhgFt16HrOrRttK7vZa3xHiEE2VfXtXjvW1m/Xq9QlXUotEHdNDDWonIOtq4lti56U1kUWoN72QVzXjCMI8YQMI4jwjTJ2IqHlyJL7JoGuqrg6nhJaYwUZKE/C47w/YTrxwzgDnXOcmRFiUteiH3N81JLzoI0/eiUBfOylH3aGBzOBto2mKYJqjSVjMbO2JV4Ez3XWZRj8bvf778ZZUybxc/CMGNFoAXYhzWL963gSuMeYkQyCDxjFvjbp4jD8XzGKctwyfPHyAVOlwvOWSZ5+n7C6RJjTkE4iG3bRebrxn+SwnE49lc2S23kIEdnTrw4vnQ5TYJVZDcIMcMQWSYEqii1dMRDxIvs9cMgxkPUZkvN+WhRj1Gv/qHLBSp5KZ7CZdvei19uXPQlF4wBYWiAe/jn81MyojGIAtfSJT2NsqDo+T8vC2ijBR7CsTwCgcpa6fR2u0GJZKyTtilktwjdfQreiTUi+KUI/y8PgdhTAcTwF4bsLMlfG/pYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"question\"\n        title=\"question\"\n        src=\"/static/7e23a678b2734b1fe4448c0328ff08ed/2bef9/1.png\"\n        srcset=\"/static/7e23a678b2734b1fe4448c0328ff08ed/6f3f2/1.png 256w,\n/static/7e23a678b2734b1fe4448c0328ff08ed/01e7c/1.png 512w,\n/static/7e23a678b2734b1fe4448c0328ff08ed/2bef9/1.png 1024w,\n/static/7e23a678b2734b1fe4448c0328ff08ed/f2b95/1.png 1515w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>OP가 설명한 상황: 동일 메소드에 대한 여러 비동기 요청이 있을때, 이미 다른 비동기 요청에 의해 처리중이라면, 다시 내부 로직을 수행하지 않고 다른 요청의 처리 결과를 기다렸다가 사용하고 싶음.</li>\n<li>예시: 한번 호출 할 때 마다 비용이 발생하는 외부 API를 호출하는데, 같은 식별자(key)로 여러 요청이 들어오면 기존 요청의 처리 결과를 기다렸다가 사용</li>\n</ul>\n<h2>제안된 해결 방식들</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5NAUf/xAAXEAEAAwAAAAAAAAAAAAAAAAARAiAh/9oACAEBAAEFAtZLT//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIi/wD/xAAXEAEAAwAAAAAAAAAAAAAAAAABACBx/9oACAEBAAE/IVxiAq//2gAMAwEAAgADAAAAEDsP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QJ//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhIDH/2gAIAQEAAT8QyS6EOgpV5kPOP//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"concurrency patterns\"\n        title=\"concurrency patterns\"\n        src=\"/static/23838bd30ef41ae806a62d95fbe3051f/72e01/concurrency-patterns.jpg\"\n        srcset=\"/static/23838bd30ef41ae806a62d95fbe3051f/e4a55/concurrency-patterns.jpg 256w,\n/static/23838bd30ef41ae806a62d95fbe3051f/36dd4/concurrency-patterns.jpg 512w,\n/static/23838bd30ef41ae806a62d95fbe3051f/72e01/concurrency-patterns.jpg 1024w,\n/static/23838bd30ef41ae806a62d95fbe3051f/ac99c/concurrency-patterns.jpg 1536w,\n/static/23838bd30ef41ae806a62d95fbe3051f/e1596/concurrency-patterns.jpg 2048w,\n/static/23838bd30ef41ae806a62d95fbe3051f/08688/concurrency-patterns.jpg 2500w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3>1. Structured Concurrency 활용</h3>\n<ul>\n<li>coroutineScope 사용: <code>all-or-nothing</code> 방식으로 동작.\n<ul>\n<li>하나의 자식 코루틴이 실패하면 모든 자식 코루틴을 즉시 취소함.</li>\n<li>실패를 상위로 전파하며, 트랜잭션과 같은 원자적 작업에 적합함.</li>\n</ul>\n</li>\n<li>supervisorScope와는 차이점이 있음: 각 자식 코루틴이 독립적으로 동작함.\n<ul>\n<li>실패를 격리시키고 부분적 실패를 허용함.</li>\n<li>독립적인 작업들을 실행할 때 적합함.</li>\n</ul>\n</li>\n</ul>\n<h3>2. Single Flight 패턴</h3>\n<ul>\n<li>동일한 작업이 동시에 요청될 때 중복 실행을 방지</li>\n<li>첫 번째 요청만 실제로 실행하고 나머지는 그 결과를 공유</li>\n<li>실제 사용 사례:\n<ul>\n<li>캐시가 없을 때 여러 요청이 동시에 들어오는 상황</li>\n<li>API 호출 중복 방지</li>\n<li>리소스 낭비 방지</li>\n</ul>\n</li>\n<li>Reference: <a href=\"https://pkg.go.dev/golang.org/x/sync/singleflight\" target=\"_blank\" rel=\"nofollow\">Golang의 singleflight</a></li>\n</ul>\n<h2>Conclusion</h2>\n<p>This discussion covers two important concurrency patterns in Programming(e.g. Kotlin):</p>\n<ol>\n<li>The fail-fast pattern using coroutineScope, which cancels all operations when one fails</li>\n<li>The Single Flight pattern, which deduplicates concurrent requests for the same operation</li>\n</ol>\n<p>While they serve different purposes:</p>\n<ul>\n<li>Fail-fast focuses on error propagation and maintaining consistency</li>\n<li>Single Flight optimizes resource usage by preventing duplicate operations</li>\n</ul>\n<p>Both patterns are valuable tools in building robust concurrent systems with Kotlin.</p>\n<h2>Real-world use cases</h2>\n<p>Interview with a Server Engineer Working on Live Streaming Applications.</p>\n<p>Here's how they optimized their microservices architecture:</p>\n<h3>Single-flight Implementation at Aggregator Level</h3>\n<p>They implemented a single-flight pattern at the aggregator level where requests expecting the same result share one response using the same key. This means:</p>\n<ol>\n<li>When the aggregator receives requests, it groups identical requests using single-flight</li>\n<li>Only one actual request is made to downstream services for each group</li>\n<li>The same response is shared across all grouped requests.</li>\n</ol>\n<h3>Performance Benefits</h3>\n<p>This implementation resulted in significant performance improvements:</p>\n<ol>\n<li>Reduced load on downstream services</li>\n<li>Improved aggregator performance by:\n<ul>\n<li>Eliminating redundant kernel-level I/O operations</li>\n<li>Reducing memory copy operations</li>\n</ul>\n</li>\n</ol>\n<h3>Additional Optimization with Rueidis</h3>\n<p>They further optimized the system using <code>Rueidis</code>, which provides server-assisted client-side caching in Go.</p>\n<ul>\n<li>Reference: <a href=\"https://gosuda.org/ko/blog/posts/improving-responsiveness-with-redis-client-side-caching-zb711e502\" target=\"_blank\" rel=\"nofollow\">(KOR.) 레디스 클라이언트 사이드 캐시로 반응성 향상 시키기</a></li>\n<li>Reference: <a href=\"https://gosuda.org/blog/posts/improving-responsiveness-with-redis-client-side-caching-zb711e502\" target=\"_blank\" rel=\"nofollow\">(ENG.) Enhancing Responsiveness with Redis Client-Side Caching</a></li>\n</ul>\n<h3>Current Architecture</h3>\n<p>Their architecture flows as follows:</p>\n<blockquote>\n<p>AWS CloudFront -> Aggregator -> Service</p>\n</blockquote>\n<h3>Multiple Layers of Optimization</h3>\n<p>The system benefits from multiple optimization layers.</p>\n<ol>\n<li>First single-flight filter at CloudFront</li>\n<li>Second single flight filter at Aggregator</li>\n<li>Client-side caching reducing service requests</li>\n</ol>\n<h3>Redis Load Reduction</h3>\n<p>This multi-layered approach significantly reduces Redis load:</p>\n<ol>\n<li>Traditional flow: Aggregator -> Service -> Redis</li>\n<li>Redis, being single-threaded, benefits significantly from reduced read operations</li>\n<li>Client-side caching further reduces the need for Redis reads</li>\n</ol>\n<p>The combination of single-flight at both CloudFront and Aggregator levels, plus client-side caching, has resulted in a substantial reduction in service requests and overall Redis load, creating a more efficient and performant system.</p>\n<h3>Important Consideration for Single-flight</h3>\n<p>They noted a critical consideration when implementing single-flight, particularly in Go:</p>\n<ul>\n<li>If single-flight instances aren't separated by routes, the locking mechanism (which occurs for every request) can become a bottleneck. This is a characteristic specific to Go's implementation of single-flight, and the behavior might differ in other programming languages.</li>\n<li>The combination of single-flight at both CloudFront and Aggregator levels, plus client-side caching, has resulted in a substantial reduction in service requests and overall Redis load, creating a more efficient and performant system.</li>\n</ul>\n<h2>My Thoughts</h2>\n<p>As a backend engineering, I find this discussion particularly relevant since it addresses a common business scenario we often encounter. When multiple clients requests the same resource simultaneously (e.g. fetching user profiles or processing payment transactions), we need to carefully handle these concurrent requests to optimize system resources and maintain data consistency.</p>\n<p>What fascinates me is how Golang has built-in support for this pattern through their <code>singleflight</code> package. It shows that this concurrency pattern is so commonly needed that they decided to provide it at the language ecosystem level. This makes me wonder why other languages haven't adopted similar built-in solutions.</p>\n<p>In my experience with Kotlin and Spring Boot, we often have to implement this pattern ourselves or rely on caching mechanisms. While these solutions work, having a standardized approach like Go's would be beneficial for consistency across different projects and team.</p>\n<p>While this pattern might not be 100% applicable in distributed environments with multiple instances, having it as part of the ecosystem provides valuable insights into solving concurrency challenges. Without exploring Go or studying various concurrency patterns, I might never have discovered this elegant approach to handling duplicate requests.</p>\n<p>Have you encountered similar concurrency challenges in your project? How did you handle them?</p>","fields":{"slug":"/동시성-패턴-Fail-fast와-Single-Flight-패턴-비교/"},"timeToRead":4,"frontmatter":{"title":"동시성 패턴: Fail-fast와 Single Flight 패턴 비교","tags":["IT 이모저모"],"date":"2025-01-31T02:58:12.000Z","image":{"publicURL":"/static/65191d3fa2671140f0b73ef9aab539eb/1.jpg"},"series":"레딧에서는 무슨 이야기를 나눌까?"}}},"pageContext":{"id":"59cc24e6-e198-59eb-baed-6c70b6cd8912"}},
    "staticQueryHashes": ["2580406332","3810308631"]}