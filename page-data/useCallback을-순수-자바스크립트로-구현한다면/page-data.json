{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/useCallback을-순수-자바스크립트로-구현한다면/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/동시성-패턴-Fail-fast와-Single-Flight-패턴-비교/"},"timeToRead":1,"frontmatter":{"title":"동시성 패턴: Fail-fast와 Single Flight 패턴 비교","series":"레딧"}},{"fields":{"slug":"/인터넷에서-상대방을-추적하는-혁신적인-방법/"},"timeToRead":2,"frontmatter":{"title":"인터넷에서 상대방을 추적하는 혁신적인 방법","series":null}},{"fields":{"slug":"/개발-조직에서의-리더/"},"timeToRead":9,"frontmatter":{"title":"개발 조직에서의 리더 (부제: 다양한 문제해결 스타일)","series":null}},{"fields":{"slug":"/재미있게-의미있게/"},"timeToRead":1,"frontmatter":{"title":"재미있게, 의미있게","series":null}},{"fields":{"slug":"/겨울날-피어난-설렘에-관하여/"},"timeToRead":1,"frontmatter":{"title":"겨울날, 피어난 설렘에 관하여","series":null}},{"fields":{"slug":"/평범한-결혼생활-임경선/"},"timeToRead":1,"frontmatter":{"title":"평범한 결혼생활 - 임경선 / 별점 3.0","series":null}},{"fields":{"slug":"/티몬-위메프-사태로-알아보는-흑자도산/"},"timeToRead":4,"frontmatter":{"title":"티몬·위메프 사태로 알아보는 흑자도산","series":null}},{"fields":{"slug":"/조직이-커지면서-발생하는-문제/"},"timeToRead":1,"frontmatter":{"title":"조직이 커지면서 발생하는 문제","series":null}},{"fields":{"slug":"/PM은-무얼-하는-사람/"},"timeToRead":2,"frontmatter":{"title":"PM은 무얼 하는 사람?","series":null}},{"fields":{"slug":"/당신은-얼마나-책임-지고-있나요-feat-Mandate-Levels/"},"timeToRead":4,"frontmatter":{"title":"당신은 얼마나 책임 지고 있나요? (feat. Mandate Levels)","series":null}},{"fields":{"slug":"/우리가-하는-일은-두-가지-유형의-일-뿐이다-부제-직무의-통합/"},"timeToRead":4,"frontmatter":{"title":"우리가 하는 일은 두 가지 유형의 일 뿐이다. (부제; 직무의 통합)","series":null}},{"fields":{"slug":"/교육-산업에-대한-고찰/"},"timeToRead":3,"frontmatter":{"title":"교육 산업에 대한 고찰","series":null}},{"fields":{"slug":"/useCallback을-순수-자바스크립트로-구현한다면/"},"timeToRead":4,"frontmatter":{"title":"useCallback을 순수 자바스크립트로 구현한다면?","series":null}},{"fields":{"slug":"/더-많은-기회를-발견하는-방법-The-Red-car-theory/"},"timeToRead":1,"frontmatter":{"title":"더 많은 기회를 발견하는 방법, The Red car theory","series":null}},{"fields":{"slug":"/주간회고-2024년-9주차/"},"timeToRead":2,"frontmatter":{"title":"[주간회고] 2024년 9주차","series":null}},{"fields":{"slug":"/번아웃을-한-번에-해결할-수-있는-방법은-성과다/"},"timeToRead":2,"frontmatter":{"title":"번아웃을 한 번에 해결할 수 있는 방법은 성과다","series":null}},{"fields":{"slug":"/주간회고-2024년-8주차/"},"timeToRead":2,"frontmatter":{"title":"[주간회고] 2024년 8주차","series":null}},{"fields":{"slug":"/유료화-그-이후-After-Willingness-to-pay/"},"timeToRead":2,"frontmatter":{"title":"유료화, 그 이후 (After Willingness to pay)","series":null}},{"fields":{"slug":"/주간회고-2024년-7주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 7주차","series":null}},{"fields":{"slug":"/주간회고-2024년-6주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 6주차","series":null}},{"fields":{"slug":"/볼타-이야기-채용-원칙/"},"timeToRead":4,"frontmatter":{"title":"[볼타 이야기] 채용 원칙","series":"볼타 이야기"}},{"fields":{"slug":"/주간회고-2024년-5주차/"},"timeToRead":3,"frontmatter":{"title":"[주간회고] 2024년 5주차","series":null}},{"fields":{"slug":"/볼타-이야기-작은-팀을-유지하려는-이유/"},"timeToRead":2,"frontmatter":{"title":"[볼타 이야기] 작은 팀을 유지하려는 이유","series":"볼타 이야기"}},{"fields":{"slug":"/볼타-이야기-결국-B2B는-잘-팔면-되는-거-아닌가/"},"timeToRead":2,"frontmatter":{"title":"[볼타 이야기] 결국 B2B는 잘 팔면 되는 거 아닌가?","series":"볼타 이야기"}},{"fields":{"slug":"/2023년-회고-프로젝트-퇴사-창업-채용-기술/"},"timeToRead":15,"frontmatter":{"title":"2023년 회고: 프로젝트, 퇴사, 창업, 채용, 기술","series":"볼타 이야기"}},{"fields":{"slug":"/실리콘밸리는-이렇게-일합니다-진짜-일과-가짜-일/"},"timeToRead":1,"frontmatter":{"title":"실리콘밸리는 이렇게 일합니다: 진짜 일과 가짜 일","series":null}},{"fields":{"slug":"/JPA-Entity-연관관계와-Domain-Entity에-대한-생각/"},"timeToRead":1,"frontmatter":{"title":"JPA Entity 연관관계와 Domain Entity에 대한 생각","series":"JPA"}},{"fields":{"slug":"/다른-사람에게-도움을-구하는-가장-좋은-방법/"},"timeToRead":5,"frontmatter":{"title":"다른 사람에게 도움을 구하는 가장 좋은 방법","series":null}},{"fields":{"slug":"/Facebook을-다운-시킨-원인-BGP-hijacking은-무엇인가/"},"timeToRead":3,"frontmatter":{"title":"Facebook을 다운 시킨 원인, BGP hijacking은 무엇인가?","series":null}},{"fields":{"slug":"/모든-회사에-어필-할-수-있는-지원-동기와-목표설정-방법/"},"timeToRead":2,"frontmatter":{"title":"모든 회사에 어필 할 수 있는 지원 동기와 목표설정 방법","series":null}},{"fields":{"slug":"/블로그-이관-및-앞으로의-계획/"},"timeToRead":2,"frontmatter":{"title":"블로그 이관 및 앞으로의 계획","series":"Vallista-land"}},{"fields":{"slug":"/빌드가-완료되면-소리-나게-해주세요/"},"timeToRead":1,"frontmatter":{"title":"???: 빌드가 완료되면 소리 나게 해주세요.","series":null}},{"fields":{"slug":"/한기용님과-함께하는-단체챗-회고/"},"timeToRead":1,"frontmatter":{"title":"한기용님과 함께하는 단체챗 회고","series":"장인 정신"}},{"fields":{"slug":"/Java-Compiler-Optimization/"},"timeToRead":3,"frontmatter":{"title":"Java Compiler Optimization","series":null}},{"fields":{"slug":"/내가-개발-커뮤니티를-하는-이유/"},"timeToRead":15,"frontmatter":{"title":"내가 개발 커뮤니티를 하는 이유 (a.k.a. 10년 회고)","series":null}},{"fields":{"slug":"/Google-Calendar-API-분석-및-시스템-구축-전략/"},"timeToRead":4,"frontmatter":{"title":"Google Calendar API 분석 및 시스템 구축 전략","series":null}},{"fields":{"slug":"/Webhooks(웹훅)-시스템-체크리스트/"},"timeToRead":2,"frontmatter":{"title":"Webhooks(웹훅) 시스템 체크리스트","series":null}},{"fields":{"slug":"/Why-DDD-Clean-Architecture-and-Hexagonal/"},"timeToRead":8,"frontmatter":{"title":"Why DDD, Clean Architecture and Hexagonal?","series":null}}],"group":[{"fieldValue":"JPA","totalCount":1},{"fieldValue":"Vallista-land","totalCount":1},{"fieldValue":"레딧","totalCount":1},{"fieldValue":"볼타 이야기","totalCount":4},{"fieldValue":"장인 정신","totalCount":1}]},"markdownRemark":{"id":"27032c2f-b833-5fc1-ba90-fda593ca774f","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.734375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHgpE2D/8QAGhAAAwADAQAAAAAAAAAAAAAAAAECESExMv/aAAgBAQABBQIlj3XFGEvR/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAExERJhkSEiQf/aAAgBAQAGPwJKckaHy9nacFfUVuk//8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITFBUf/aAAgBAQABPyEGsK1sSoDYGqQxCTy+YI0qBh5AmUGyf//aAAwDAQACAAMAAAAQLD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFhgXH/2gAIAQEAAT8QFM0XyCzqAE0soPUfIlRwANbhFZlKjB5qPFSLjQ89xO6Een2+Z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hero\"\n        title=\"hero\"\n        src=\"/static/95f35a6e5b7cc030b5e628ee2fa43f1c/72e01/1.jpg\"\n        srcset=\"/static/95f35a6e5b7cc030b5e628ee2fa43f1c/e4a55/1.jpg 256w,\n/static/95f35a6e5b7cc030b5e628ee2fa43f1c/36dd4/1.jpg 512w,\n/static/95f35a6e5b7cc030b5e628ee2fa43f1c/72e01/1.jpg 1024w,\n/static/95f35a6e5b7cc030b5e628ee2fa43f1c/ac99c/1.jpg 1536w,\n/static/95f35a6e5b7cc030b5e628ee2fa43f1c/e1596/1.jpg 2048w,\n/static/95f35a6e5b7cc030b5e628ee2fa43f1c/01fc7/1.jpg 3200w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>React의 <code>useCallback</code> 함수는 함수를 캐싱하여 불필요한 리렌더링을 방지하고, 성능을 최적화하는 데 도움을 주는 훅(Hook)입니다. 일종의 <code>함수 캐싱</code>이라고 볼 수도 있는데요. 이를 순수 자바스크립트로 구현한다면 어떻게 만들 수 있을까요?</p>\n<p>우선 어떤 구성 요소가 필요할지 고민이 필요합니다. 간단하게 생각해 봤을 때는 아래와 같은 요소가 필요할 것으로 보입니다.</p>\n<ol>\n<li>함수를 캐싱하기 위하여 기존 함수를 저장하는 변수</li>\n<li>기존 의존성 배열의 값을 저장하는 변수</li>\n<li>함수를 처음 호출하는지 검사하는 함수</li>\n<li>의존성 배열이 변경되었는지 검사하는 함수</li>\n<li>새로운 함수와 의존성을 캐싱하는 함수</li>\n</ol>\n<p>단계별로 쪼개어 다루어보겠습니다.</p>\n<h2>1. 함수를 캐싱하기 위하여 기존 함수를 저장하는 변수</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<h2>2. 기존 의존성 배열의 값을 저장하는 변수</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<h2>3. 함수를 처음 호출하는지 검사하는 함수</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">verifyInitialCall</span><span class=\"mtk1\">(</span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> === </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// or</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> !</span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2>4. 의존성 배열이 변경되었는지 검사하는 함수</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">dependenciesAreEquals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">, </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\"> === </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> !== </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">] !== </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">]) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 사용 예시</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk11\">dependenciesAreEquals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\">, </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2>5. 새로운 함수와 의존성을 캐싱하는 함수</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">func</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>위 로직을 합쳐보면 아래와 같은 꼴이 됩니다.</p>\n<h2>useCallback Sample #1</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">useCallback</span><span class=\"mtk1\">(</span><span class=\"mtk12\">func</span><span class=\"mtk1\">, </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 함수를 캐싱하기 위하여 기존 함수를 저장하는 변수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 기존 의존성 배열의 값을 저장하는 변수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> () {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 함수를 처음 호출하거나 의존성 배열이 변경된 경우 새로운 함수 생성</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      !</span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> || !</span><span class=\"mtk11\">dependenciesAreEquals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\">, </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">func</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">cachedDependencies</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cachedFunction</span><span class=\"mtk1\">.</span><span class=\"mtk11\">apply</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">, </span><span class=\"mtk4\">arguments</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 두 의존성 배열이 같은지 비교하는 함수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">dependenciesAreEquals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">, </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\"> === </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> !== </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">arr1</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">] !== </span><span class=\"mtk12\">arr2</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">]) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 사용 예시</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProfileComponent</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">handleClick</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useCallback</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Button clicked&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, []);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">onClick</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">handleClick</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Click me</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">button</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>예제 소스코드: <a href=\"https://playcode.io/1867478?v=1\" target=\"_blank\" rel=\"nofollow\">React Playground - useCallback Sample 1</a></p>\n<p><img src=\"/10a87292c4f2de5103b81c56483a2328/2.gif\" alt=\"useCallback Sample 1.gif\"></p>\n<h2>개선 &#x26; 최적화 - useCallback Sample #2</h2>\n<p>첫 번째 예시는 정말 동작만 되게끔 만들기 위해 다수의 함수가 생성되고, 코드의 길이도 긴 편이라 가독성과 효율이 뛰어나지 못합니다. Javascript의 Prototype과 클로저를 적극 활용하여 코드의 길이를 전반적으로 줄여보겠습니다.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">customUseCallback</span><span class=\"mtk1\">(</span><span class=\"mtk12\">callback</span><span class=\"mtk1\">, </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">memoizedCallback</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> (...</span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">.</span><span class=\"mtk12\">cache</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">.</span><span class=\"mtk12\">cache</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Map</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">dependencies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">join</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;-&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">.</span><span class=\"mtk12\">cache</span><span class=\"mtk1\">.</span><span class=\"mtk11\">has</span><span class=\"mtk1\">(</span><span class=\"mtk12\">key</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;cache hit!&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">.</span><span class=\"mtk12\">cache</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk12\">key</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">callback</span><span class=\"mtk1\">(...</span><span class=\"mtk12\">args</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">.</span><span class=\"mtk12\">cache</span><span class=\"mtk1\">.</span><span class=\"mtk11\">set</span><span class=\"mtk1\">(</span><span class=\"mtk12\">key</span><span class=\"mtk1\">, </span><span class=\"mtk12\">result</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;cache miss!&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">result</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memoizedCallback</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 사용 예시</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">App</span><span class=\"mtk1\">(</span><span class=\"mtk12\">props</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">count</span><span class=\"mtk1\">, </span><span class=\"mtk12\">setCount</span><span class=\"mtk1\">] = </span><span class=\"mtk11\">useState</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">handleClick</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">customUseCallback</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Button clicked&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk12\">count</span><span class=\"mtk1\">]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;App&#39;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">onClick</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">handleClick</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Click me</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">button</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">onClick</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk1\">() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">setCount</span><span class=\"mtk1\">(</span><span class=\"mtk12\">c</span><span class=\"mtk1\"> </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">c</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Count Up (</span><span class=\"mtk4\">{</span><span class=\"mtk12\">count</span><span class=\"mtk4\">}</span><span class=\"mtk1\">)</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">button</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>예제 소스코드: <a href=\"https://playcode.io/1867478?v=2\" target=\"_blank\" rel=\"nofollow\">React Playground - useCallback Sample2</a></p>\n<p><img src=\"/081905ec66ffa16789d439562fd985b2/3.gif\" alt=\"useCallback Sample 2.gif\"></p>\n<h2>문제점</h2>\n<p>두 단계에 걸쳐 <code>useCallback</code>을 임의로 만들어보았는데요. 이 코드를 React에서 사용하기에는 큰 문제가 있습니다. 바로 렌더링마다 <code>useCallback</code> 함수가 새롭게 호출되면서 캐시도 초기화된다는 건데요.</p>\n<p>이에 따라 의존성 배열의 변경과 상관없이 렌더링마다 새로운 함수가 생성됩니다. 즉, <code>함수를 캐싱한다.</code>라는 초기 요구사항을 만족시키지 못한 것인데요. 그럼, 이 부분은 어떻게 개선해야 할까요?</p>\n<h3>문제점 해결</h3>\n<p>렌더링할 때마다 <code>useCallback</code> 함수 전체가 재실행되면서 캐시 초기화와 캐시 검증 로직 전체가 동시에 이루어지는 게 현재의 문제점입니다.</p>\n<p>그럼, 이 두 영역을 분리하면 어떨까요?</p>\n<p>리액트의 컴포넌트는 크게 <code>mount</code>, <code>update</code>, <code>unmount</code> 세 단계의 생명주기를 가지는데요. 이를 활용하면 힌트를 얻을 수 있습니다.</p>\n<p><code>mount</code> 단계에 캐시를 초기화하고, <code>update</code> 단계에 캐시 검증 로직을 실행하면 쉽게 해결할 수 있을 것으로 보입니다.</p>\n<p>저희가 만든 <code>useCallback</code> 함수를 리액트 컴포넌트 생명 주기에 맞추어 각각 쪼개어 실행하게 하는 건 손이 많이 가고, 꽤 번거로운 작업이기에 실제 React의 <code>useCallback</code> 함수 구현을 보며 이야기해 보겠습니다.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"> * 대략의 구현</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mountCallback</span><span class=\"mtk1\"> () { </span><span class=\"mtk3\">/* */</span><span class=\"mtk1\"> } </span><span class=\"mtk3\">// 마운트 상황의 구현체</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateCallback</span><span class=\"mtk1\"> () { </span><span class=\"mtk3\">/* */</span><span class=\"mtk1\"> } </span><span class=\"mtk3\">// 렌더 상황의 구현체</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">HooksDispatcherOnMount</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">useCallback:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">mountCallback</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">HooksDispatcherOnUpdate</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">useCallback:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">updateCallback</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/* 컴포넌트 렌더 시에 실행되는 함수 */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">renderWithHooks</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">ReactCurrentDispatcher</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">current</span><span class=\"mtk1\"> === </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> || </span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk12\">memoizedState</span><span class=\"mtk1\"> === </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 최초 마운트라면</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ? </span><span class=\"mtk12\">HooksDispatcherOnMount</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      : </span><span class=\"mtk12\">HooksDispatcherOnUpdate</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>실제로 <code>mountCallback</code>과 <code>updateCallback</code>이 분리되어 있으며, 각 생명주기에 따라 적절한 함수를 호출하는 모습을 볼 수 있습니다.</p>\n<p>자세한 구현은 내용이 길어져 관련 소스코드 링크로 생략합니다.</p>\n<ul>\n<li><a href=\"https://github.com/facebook/react/blob/9e3b772b8cabbd8cadc7522ebe3dde3279e79d9e/packages/react-reconciler/src/ReactFiberHooks.new.js\" target=\"_blank\" rel=\"nofollow\">facebook/react on GitHub</a></li>\n</ul>\n<h2>마무리</h2>\n<p>이번 예시는 React라는 라이브러리의 생태계 위에서 코드를 작성하다 보니 React 컴포넌트의 생명주기까지 확인을 해야만 했는데요. 순수 Javascript 프로젝트에서는 함수의 파라미터가 동일하다면 반환 값을 캐싱하는 형태도 위 코드를 활용하여 구현해볼 수 있을 것으로 보입니다. <code>다들 한번 해보시면 어떨까요? 🙂</code></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk17 { color: #808080; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/useCallback을-순수-자바스크립트로-구현한다면/"},"timeToRead":4,"frontmatter":{"title":"useCallback을 순수 자바스크립트로 구현한다면?","tags":["Web Frontend"],"date":"2024-05-12T21:07:55.000Z","image":{"publicURL":"/static/95f35a6e5b7cc030b5e628ee2fa43f1c/1.jpeg"},"series":null}}},"pageContext":{"id":"27032c2f-b833-5fc1-ba90-fda593ca774f"}},
    "staticQueryHashes": ["2580406332","3810308631"]}