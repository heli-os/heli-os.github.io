{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/Webhooks(웹훅)-시스템-체크리스트/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/2024년을-시작하며-(2023년-회고)/"},"timeToRead":1,"frontmatter":{"title":"2024년을 시작하며 (2023년 회고)","series":null}},{"fields":{"slug":"/실리콘밸리는-이렇게-일합니다-진짜-일과-가짜-일/"},"timeToRead":1,"frontmatter":{"title":"실리콘밸리는 이렇게 일합니다: 진짜 일과 가짜 일","series":null}},{"fields":{"slug":"/JPA-Entity-연관관계와-Domain-Entity에-대한-생각/"},"timeToRead":1,"frontmatter":{"title":"JPA Entity 연관관계와 Domain Entity에 대한 생각","series":"JPA"}},{"fields":{"slug":"/다른-사람에게-도움을-구하는-가장-좋은-방법/"},"timeToRead":5,"frontmatter":{"title":"다른 사람에게 도움을 구하는 가장 좋은 방법","series":null}},{"fields":{"slug":"/Facebook을-다운-시킨-원인-BGP-hijacking은-무엇인가/"},"timeToRead":3,"frontmatter":{"title":"Facebook을 다운 시킨 원인, BGP hijacking은 무엇인가?","series":null}},{"fields":{"slug":"/모든-회사에-어필-할-수-있는-지원-동기와-목표설정-방법/"},"timeToRead":2,"frontmatter":{"title":"모든 회사에 어필 할 수 있는 지원 동기와 목표설정 방법","series":null}},{"fields":{"slug":"/블로그-이관-및-앞으로의-계획/"},"timeToRead":2,"frontmatter":{"title":"블로그 이관 및 앞으로의 계획","series":"Vallista-land"}},{"fields":{"slug":"/빌드가-완료되면-소리-나게-해주세요/"},"timeToRead":1,"frontmatter":{"title":"???: 빌드가 완료되면 소리 나게 해주세요.","series":null}},{"fields":{"slug":"/한기용님과-함께하는-단체챗-회고/"},"timeToRead":1,"frontmatter":{"title":"한기용님과 함께하는 단체챗 회고","series":"장인 정신"}},{"fields":{"slug":"/Java-Compiler-Optimization/"},"timeToRead":3,"frontmatter":{"title":"Java Compiler Optimization","series":null}},{"fields":{"slug":"/Google-Calendar-API-분석-및-시스템-구축-전략/"},"timeToRead":4,"frontmatter":{"title":"Google Calendar API 분석 및 시스템 구축 전략","series":null}},{"fields":{"slug":"/Webhooks(웹훅)-시스템-체크리스트/"},"timeToRead":2,"frontmatter":{"title":"Webhooks(웹훅) 시스템 체크리스트","series":null}},{"fields":{"slug":"/Why-DDD-Clean-Architecture-and-Hexagonal/"},"timeToRead":8,"frontmatter":{"title":"Why DDD, Clean Architecture and Hexagonal?","series":null}}],"group":[{"fieldValue":"JPA","totalCount":1},{"fieldValue":"Vallista-land","totalCount":1},{"fieldValue":"장인 정신","totalCount":1}]},"markdownRemark":{"id":"b78e8bd8-d363-5d68-917a-5c524394b5b7","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.890625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz4VSu24UMRSdEkFJg/gJqPgGSijoqBAdJQ2pkRASEg2/gISUAghFEIiXFLKPLMmCArvs7EyyScisx4+x5+Hx2OMHcpakCQjr6sqPc+x7fU6AqDsdOXel8LkQjlYOZu6vsOD0VkrMi1cfni2vvn2/8XzlXac/pqWDmT0+dYD8k2yz3E0i+O373miSfN2ehTFC1EJqYeZpRekDEL8MYGYhkSnRiFrMHIBVHMeNbN3xMMZKqRKQY+ZEbbsT1Q+VqD04YLmw1jSNAqiGmSO0IRgxxpSUnHNjtHPOWnM4pwkyj1b5pQf68kP3+HUNsA44b5Rqm0YRyiG1LFesUvNMkkLWda21J7daY0TXx82ZO/WFJXvxLjp7c3MrLAMhTcVVtJuOt15OR50UK8YyIZo/RVtnrTXGoBS/GYqr9ztXlgbB9f65G5+2Qh7QXBVlg0g1O2AHQGZMOWukNFWtcl6XQrbaXzAHdA/Ye0+j87dHwbXOrSfjBGn/YQCJlGiSO8x8z9ZqIVRViZoXQgnjH273fxHCXMHdcrde6WZN48EBJGahYUoMZm6OmjBKoh0Q7YDpDohin8M4iWcEUgdwW5WmrNwcG69zbzAZDKOPa8Puxs/9hNPSbY+Tte6PwTDuf5l2B+Hn3iiaMcZdvMc6/VFvM+psTNZ7o92D4kjnzB6mEmCdErOwCkAtzPzcN4X1ojSY2fSozJSYI7BeOMwrfmKyEyf+N34DfjHBPqOEXYEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hero\"\n        title=\"hero\"\n        src=\"/static/8b81a19328dd35573f73e59888f37b70/2bef9/1.png\"\n        srcset=\"/static/8b81a19328dd35573f73e59888f37b70/6f3f2/1.png 256w,\n/static/8b81a19328dd35573f73e59888f37b70/01e7c/1.png 512w,\n/static/8b81a19328dd35573f73e59888f37b70/2bef9/1.png 1024w,\n/static/8b81a19328dd35573f73e59888f37b70/21b4d/1.png 1280w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>들어서며</h2>\n<p>최근 Webhooks 시스템을 구성하기 위해 필요한 요소를 짤막하게 고민해볼 기회가 생겨, 그때 고민해본 내용을 공유해보고자 합니다.</p>\n<p>많은 분들이 웹훅 시스템을 구성한다고 하면 애플리케이션 시스템 아키텍처보다는 인프라 측면의 보안적인 요소에 많은 관심을 가지실 것입니다. 그래서 이번 게시글도 보안에 대한 부분을 메인으로 다루어보겠습니다.</p>\n<p>보안과 관련된 내용은 기존 경험에 의한 생각, 웹훅 서비스를 제공하고 있는 서비스 벤치마킹 그리고 네이버와 센드버드에서 보안 업종에 종사하고 있으신 분에게 조언받아 작성하였습니다. 🙂</p>\n<h2>시스템 체크리스트(보안)</h2>\n<h3>1. 통신 암호화</h3>\n<p>100% 신뢰할 수 있으며 통제할 수 있는 내부 시스템이 아닌 이상 통신 암호화는 필수요소라고 말할 수 있습니다. HTTP 통신을 한다면 HTTPS는 필수입니다. 벤치마킹해보니 일부 웹훅 서비스는 수신 측에서 HTTPS가 아니라면 웹훅 자체를 발송해주지 않는 서비스도 존재하고 있었습니다.</p>\n<h3>2. 데이터 서명</h3>\n<p>데이터 서명의 경우 하면 좋은데, 수신 측과 발신 측 모두 약간의 번거로움이 생길 수 있는 기능입니다. 하지만 그와 동시에 이상적 시스템을 위해선 꼭 적용해야 하는 부분이기도 합니다.</p>\n<p>막상 데이터 서명 기능을 제공하더라도 사용자에 따라 서명을 귀찮아하거나 검증을 위한 컴퓨팅 리소스 할애 등을 이유로 평문으로 데이터를 전달 받기 원하는 경우가 있을 수도 있습니다. 이 부분은 시스템을 구성하는 데 있어 고려해볼 만한 부분인 것 같습니다.</p>\n<p>만약 데이터 서명을 선택적 기능으로 제공한다면 '기능은 제공하지만, 사용자가 안전하게 사용하지 않는 것'이라는 책임 회피/전가 즉, Shared Responsibility 구조를 가지게 됩니다. 이는 많은 소프트웨어와 정책, 사업 등에서 채택하고 있는 방법이고 웹훅을 정말 적극적으로 제공하는 깃헙 또한 데이터 서명을 선택적 기능으로 제공하고 있습니다.</p>\n<p><a href=\"https://docs.github.com/en/developers/webhooks-and-events/webhooks/securing-your-webhooks\" target=\"_blank\" rel=\"nofollow\">https://docs.github.com/en/developers/webhooks-and-events/webhooks/securing-your-webhooks</a></p>\n<h3>3. 신뢰할 수 있는 발신처 제공</h3>\n<p>웹훅을 수신하는 입장에서 생각해볼 때, 우리가 수신한 웹훅이 정말 신뢰할 수 있는 시스템이 보낸 제대로 된 데이터일까? 라는 부분은 정말 중요한 요소입니다. 통신을 암호화하고, 데이터를 서명하였더라도 그때 사용하는 인증서나 키가 노출된다면 무용지물입니다.</p>\n<p>'웹훅을 보낸 발신처를 신뢰할 수 있는가?'를 판단할 수 있는 가장 대표적 지표는 웹훅을 발신한 시스템이 '누구'인가입니다. 그렇다면 '누구'는 어떻게 식별할 수 있을까요? 방법은 L7에서 확인하거나 L3에서 확인하는 등 다양하겠지만, 가장 쉽고 널리 사용되는 방법은 웹훅 발신 시스템의 IP를 우리 네트워크에 화이트 리스트로 등록하여 L3에서 발신처를 검증하는 방식입니다.</p>\n<h3>4. 수신처의 제한</h3>\n<p>웹훅을 발신하는 입장에서 고민해보아야 하는 부분도 존재합니다. 일반적으로 외부에서 알기는 어렵겠지만 만약 내부에서만 호출 가능한 내부 서버(서버 애플리케이션, nginx, redis 등) 킬 스위치 같은 API가 있다면, 사용자가 웹훅 대상 URL을 해당 킬 스위치 API로 지정하였을 때 문제가 발생할 수 있습니다. 서버 자체를 킬 하는 스위치가 아니더라도 액츄에이터 재시작 엔드포인트정도는 쉽게 유추할 수 있기 때문에 유의해야만 합니다.</p>\n<p>이런 부분을 방지하기 위해선 웹훅을 발송할 때 수신측이 내부망 대역의 IP라면 발송하지 않게끔 해야하며, 30x 리디렉션의 목적지가 내부망이라면 무시하는 등의 보안 조치가 필요합니다.</p>\n<h2>마무리</h2>\n<p>보안 측면의 체크리스트를 정리해보자면 결국 모든 통신은 신뢰할 수 있어야 한다는 것으로 귀결됩니다. 이는 수신 측 웹훅 URL은 어떠한 경로로든 외부에 노출될 가능성(내부 직원의 실수, 웹훅 발신 시스템 해킹 등)이 존재한다는 것을 전제로 하고 있기도 합니다.</p>\n<p>만약 HTTPS 통신을 하고 있으며, 신뢰할 수 있는 웹훅 발신 시스템의 IP만 허용했다면 100% 안전한 시스템일까요? 그렇지 않습니다. 웹훅 발신 시스템이 해킹당하여 해커가 curl을 이용해 여러 수신처에게 요청을 보낸다면 어떻게 될까요? 웹훅을 수신한 시스템들은 '신뢰할 수 있는 시스템'의 요청이기 때문에 이를 신뢰하게 됩니다.</p>\n<p>만약 데이터를 서명했다면 서명에 사용되는 키가 유실되지 않는 이상 문제가 발생할 가능성을 줄일 수 있습니다.</p>\n<p>보안 조치라는건 결국 시스템이 취약해질 가능성을 줄이는 행위입니다. 그렇기에 우리는 항상 그 가능성을 줄이기 위해 노력하고 있는게 아닐까 싶습니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","fields":{"slug":"/Webhooks(웹훅)-시스템-체크리스트/"},"timeToRead":2,"frontmatter":{"title":"Webhooks(웹훅) 시스템 체크리스트","tags":["시스템 설계"],"date":"2022-11-12T03:10:32.000Z","image":{"publicURL":"/static/8b81a19328dd35573f73e59888f37b70/1.png"},"series":null}}},"pageContext":{"id":"b78e8bd8-d363-5d68-917a-5c524394b5b7"}},
    "staticQueryHashes": ["2580406332","3810308631"]}